(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{415:function(s,t,a){"use strict";a.r(t);var r=a(56),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"sql-injection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql-injection"}},[s._v("#")]),s._v(" SQL Injection")]),s._v(" "),a("p",[s._v("해커가 조작된 SQL을 날려주어 디비를 손상시키나 정보를 빼앗아가는 공격기법이다."),a("br"),s._v('\n대표적인 사건의 예로 2017년도에 "여기어때"의 개인정보 유출 사건이 있다.')]),s._v(" "),a("h2",{attrs:{id:"공격-방법"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#공격-방법"}},[s._v("#")]),s._v(" 공격 방법")]),s._v(" "),a("ol",[a("li",[s._v("논리적 에러를 활용한 공격"),a("br"),s._v("\n로그인을 위해 아이디와 패스워드가 필요하다고 하면, 아래와 같이 쿼리가 나가게 된다.")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" members "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"input1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" pwd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"input2"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v('그런데 이와 같은 sql에 논리적인 에러로 "1 == 1"과 같이 항상 참인 값을 넣어 패스워드가 다르더라도 정보를 빼올 수 있게 만든다.')]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" members "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"input1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('-- pwd = "input2"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("이렇게 쿼리를 변경하여 가장 처음에 만든 아이디로 로그인이 될 수 있고 DB를 원하는대로 조작할수 있다.")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("Error Message를 활용\n시스템이 동작하며 발생하는 에러메시지를 활용해 DB의 구조를 유추할 수 있다.\n악의적으로 GET 방식으로 동작하는 URL에 쿼리스트링을 추가해 에러를 유발하고 이 에러를 확인하여 DB의 구조를 알고 공격에 참고할 수 있다.")])]),s._v(" "),a("h2",{attrs:{id:"방어-방법"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#방어-방법"}},[s._v("#")]),s._v(" 방어 방법")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("입력값에 대한 검증하기"),a("br"),s._v("\nSQL이 왔을 때 그 값이 적절한 값인지 확인하여주는 방법이다. 적절하지 않은 값을 블랙리스트로 추가하고 블랙리스트 건을 제외하는 방법은 굉장히 다양한 방법에 대하여 적응해야하기때문에 사실싱 불가능하다.\n따라서 화이트리스트 방식으로 적절한 쿼리인지 확인하고 적용해주면 된다.")])]),s._v(" "),a("li",[a("p",[s._v("Error Message 노출 금지\nDB의 에러를 일반 사용자들이 볼 수 없도록 조치한다.")])]),s._v(" "),a("li",[a("p",[s._v("Prepared Statement 구문 사용\n사용자의 입력값이 데이터베이스로 들어가기 전에 DBMS에서 미리 컴파일하여 ?로 값을 미리 설정해두고 실행을 하지 않고 대기를 한다.\n추후에 공격 쿼리가 들어와도 의미없는 단순한 문자열로 판단하여 원하는대로 실행이 되지 않는다.")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);